# 典型因子家族与 A 股实践说明（草案）

> 版本：v0.1  
> 作用：为 LLM 提供常见因子家族的直观解释、简单公式和 A 股适配注意点，指导其提出更有意义的因子设想。

---

## 1. 动量因子（Momentum）

### 1.1 概念

- 描述价格“涨多/跌多”的趋势持续性，关注过去一段时间的累积涨跌幅。

### 1.2 简单公式示例

- n 日价格动量：
  - \( MOM_{n}(t) = \frac{Close_t}{Close_{t-n}} - 1 \)
- 或者使用收益率均值：
  - \( MOM_{n}(t) = \frac{1}{n} \sum_{k=1}^{n} R_{t-k} \)

### 1.3 A 股实践要点

- T+1、涨跌停限制会影响纯价格动量的可交易性：
  - 极端连续涨停/跌停个股在回测中可能有强动量，但真实交易无法完全跟上；
- 常与成交量、换手率、流动性因子结合使用，避免选到交易极不活跃的股票；
- 建议在组合层面控制行业暴露，避免动量因子只在单一行业内集中爆发。

---

## 2. 反转因子（Reversal / Mean Reversion）

### 2.1 概念

- 假设价格在短期/中期内存在“超涨超跌后回归均值”的现象。

### 2.2 简单公式示例

- 短期反转：
  - \( REV_{5}(t) = -MOM_{5}(t) \)（对近 5 日收益取负）；
- 中期反转：
  - 先定义中期动量，再取负或构造“落后组合”。

### 2.3 A 股实践要点

- 短期反转在高波动阶段较明显，但交易成本/滑点影响很大；
- 需特别关注：
  - 频繁调仓会显著抬高换手率，组合层面收益可能被成本吃掉；
  - 与涨跌停制度叠加时，极端反转机会未必可执行。

---

## 3. 波动率因子（Volatility）

### 3.1 概念

- 描述价格波动大小，常用收益率的标准差或平均绝对偏差衡量。

### 3.2 简单公式示例

- n 日历史波动率：
  - \( VOL_{n}(t) = std(R_{t-1}, \dots, R_{t-n}) \)
- 注意：
  - 通常应使用 **过去 n 日的收益率**，例如 `R_{t-1}...R_{t-n}`，而不是包含当日 `R_t`。

### 3.3 A 股实践要点

- 波动率可作为风险因子，也可与动量组合成“风险调整后收益”：
  - 例如：`VolAdjMomentum_20D = Momentum_20D / Volatility_20D`；
  - 需要严格对齐时间窗口，防止分子分母不一致造成前视偏差。
- 对极端低波动（接近停牌）的股票，要注意除零/数值稳定性问题。

---

## 4. 流动性与成交量因子（Liquidity / Volume）

### 4.1 概念

- 描述股票交易活跃度和买卖成本；
- 在 A 股，量价关系和换手率往往具有较强信息含量。

### 4.2 简单指标示例

- 换手率：`Turnover = Volume / FreeFloatShares`（在缺乏自由流通股数据时，可用成交额与市值近似代替）；
- 量比：当日成交量与过去 n 日均量之比；
- 放量/缩量标记：
  - 放量：`Volume_t > k * AVG(Volume_{t-n...t-1})`；
  - 缩量：反之。

### 4.3 A 股实践要点

- 许多“无量涨停/跌停”个股在价格上看似强弱分明，但缺乏真实可成交量；
- 流动性因子可用于：
  - 直接参与选股（偏好流动性中高的标的）；
  - 用作控制变量，在组合构建阶段对流动性暴露做约束；
- 与价格动量结合形成“量价共振”类信号（放量上攻、缩量回调等）。

---

## 5. 资金流与筹码因子（预留）

> 当前 AIstock 的 HDF5 尚以 `daily_pv.h5` 为主，未来将扩展主力资金、北向资金、筹码峰等数据。

### 5.1 概念

- 资金流：
  - 若有主力净流入、北向资金净买入等字段，可构造“资金推动”因子；
- 筹码结构：
  - 例如筹码高低位集中度、筹码峰位置等。

### 5.2 A 股实践要点（方向性）

- 主力资金流向在短期价格动量中常扮演重要角色；
- 筹码向上迁移过程中，股价震荡上行往往更健康；
- 未来扩展字段（如 `$mf_net_inflow_1d` 等）应在 schema 文档中明确，便于 LLM 正确调用。

---

## 6. 组合与风险因子（高层面）

### 6.1 概念

- 除了“选股因子”，还存在“风险因子”：
  - 市值、估值、行业、波动率、流动性等；
- 在组合层面通常希望：
  - 对这些风险因子的暴露可控（行业中性、风格中性等）。

### 6.2 A 股实践要点

- 行业暴露：
  - 某些行业在特定阶段整体向下/向上，容易掩盖因子本身的效果；
- 市值暴露：
  - 小盘股往往波动更大，Alpha 与 size beta 容易混在一起；
- 建议在回测或组合构建时：
  - 先评估组合对这些 risk factors 的暴露，再判断因子是否真正带来超额收益。

---

## 7. 对 LLM 的建议用法

在提出新的因子/策略设想时，LLM 应：

1. 明确说明该因子的归属家族（动量/反转/波动率/流动性/资金流等）；
2. 给出简洁、可解释的公式或伪代码，而不是一开始就给出复杂黑箱结构；
3. 结合 A 股特性（T+1、涨跌停、ST 过滤、流动性差异等）说明预期适用场景；
4. 在分析回测结果时，主动联系该因子家族的典型行为特征（如动量在趋势市更有效、反转在震荡市更明显等）。
