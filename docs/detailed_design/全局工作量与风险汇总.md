# 全局工作量与风险汇总

## 项目总览

**项目名称**: RD-Agent扩展与AIStock集成  
**总工作量**: 113人日（约5.6个月，单人）  
**推荐团队**: 2-3人  
**预计工期**: 3-4个月（多人并行）  
**总体风险**: 中

---

## 各Phase工作量汇总

| Phase | 模块 | 开发 | 测试 | 总计 | 优先级 | 风险 |
|-------|------|------|------|------|--------|------|
| Phase 1 | ML模型适配器 | 9.5人日 | 3人日 | 12.5人日 | P0 | 中 |
| Phase 1 | 因子库管理 | 11.5人日 | 2.5人日 | 14人日 | P0 | 低 |
| Phase 1 | API扩展 | 9人日 | 2.5人日 | 11.5人日 | P0 | 低 |
| **Phase 1 小计** | - | **30** | **8** | **38人日** | P0 | 中 |
| Phase 2 | 多模型协同 | 9人日 | 2.5人日 | 11.5人日 | P1 | 中 |
| Phase 2 | HMM分析 | 7人日 | 2.5人日 | 9.5人日 | P1 | 中 |
| **Phase 2 小计** | - | **16** | **5** | **21人日** | P1 | 中 |
| Phase 3 | 策略演进 | 11人日 | 2人日 | 13人日 | P2 | 中 |
| Phase 3 | 高级模型 | 9人日 | 1人日 | 10人日 | P2 | 高 |
| **Phase 3 小计** | - | **20** | **3** | **23人日** | P2 | 高 |
| Phase 4 | 测试优化 | 15人日 | 6人日 | 21人日 | P0 | 低 |
| **总计** | - | **81** | **22** | **103人日** | - | - |
| **缓冲10%** | - | - | - | **+10人日** | - | - |
| **最终总计** | - | - | - | **113人日** | - | - |

---

## 核心风险汇总

### 高风险项

| 风险 | Phase | 影响 | 概率 | 缓解措施 |
|------|-------|------|------|---------|
| RL训练不稳定 | P3 | 高 | 高 | 参考FinRL，充分调参 |
| GraphNN图构造复杂 | P3 | 高 | 高 | 先用简单相关性 |
| 依赖库版本冲突 | P1 | 中 | 中 | conda环境隔离 |
| HMM训练不稳定 | P2 | 高 | 中 | 多次训练取最优 |

### 中风险项

| 风险 | Phase | 缓解措施 |
|------|-------|---------|
| 因子优化效果不佳 | P1 | 先用简单贪心，逐步优化 |
| 多模型训练耗时长 | P2 | 并行训练，优化数据加载 |
| 策略参数优化慢 | P3 | 限制优化次数，使用缓存 |

---

## 开发时间线（2人团队，推荐）

### Month 1-1.5: Phase 1 基础设施（6周）

**开发者A（后端核心）**:
- Week 1-2: ML模型适配器开发
- Week 3-4: 因子库核心开发
- Week 5-6: 集成与测试

**开发者B（API专家）**:
- Week 1-2: API框架搭建
- Week 3-4: API路由开发
- Week 5-6: 因子库API + 测试

### Month 2: Phase 2 核心功能（4周）

**开发者A**:
- Week 7-8: 多模型协同选股
- Week 9-10: 集成测试

**开发者B**:
- Week 7-8: HMM大盘分析
- Week 9-10: API集成 + 测试

### Month 2.5-3: Phase 3 高级功能（可选，4周）

**开发者A**:
- Week 11-12: 策略演进框架
- Week 13-14: GraphNN适配器

**开发者B**:
- Week 11-12: 策略优化器
- Week 13-14: RL适配器（可选）

### Month 3.5: Phase 4 测试与优化（2周）

**开发者A & B**:
- Week 15: 全面测试 + 性能优化
- Week 16: 文档 + 部署

**总工期**: 3.5-4个月

---

## 里程碑

### M1: Phase 1完成（Week 6）
✅ ML模型适配器可用  
✅ 因子库可正常CRUD  
✅ API基础端点可访问  
✅ 单元测试覆盖率>80%

### M2: Phase 2完成（Week 10）
✅ 多模型协同选股可用  
✅ HMM市场状态识别可用  
✅ API完整集成  
✅ 集成测试通过

### M3: Phase 3完成（Week 14，可选）
✅ 策略参数可自动优化  
✅ GraphNN模型可训练  
✅ RL模型可训练（可选）

### M4: 项目交付（Week 16）
✅ 所有测试通过  
✅ 性能达标  
✅ 文档完整  
✅ 可部署上线

---

## 依赖库汇总

```txt
# 核心依赖
qlib>=0.9.0
pytorch>=2.0.0
numpy>=1.24.0
pandas>=2.0.0

# ML模型
xgboost>=1.7.0
lightgbm>=4.0.0
catboost>=1.2.0
scikit-learn>=1.3.0

# 高级模型
torch-geometric>=2.3.0  # GraphNN
stable-baselines3>=2.0.0  # RL
gym>=0.26.0  # RL环境

# HMM
hmmlearn>=0.3.0

# 优化
optuna>=3.0.0

# API
fastapi>=0.100.0
uvicorn>=0.23.0
pydantic>=2.0.0

# 数据库
sqlite3（内置）

# 测试
pytest>=7.4.0
pytest-cov>=4.1.0
```

---

## 成本估算

假设人日成本为1000元：

| 项目 | 工作量 | 成本（元） |
|------|--------|-----------|
| Phase 1 | 38人日 | 38,000 |
| Phase 2 | 21人日 | 21,000 |
| Phase 3 | 23人日 | 23,000 |
| Phase 4 | 21人日 | 21,000 |
| 缓冲10% | 10人日 | 10,000 |
| **总计** | **113人日** | **113,000** |

**2人团队3.5个月成本**: 约11.3万元

---

## 推荐实施方案

### 最小可行产品（MVP）
**包含**: Phase 1 + Phase 4  
**工作量**: 59人日（约2个月，2人团队）  
**核心价值**: ML模型支持 + 因子库 + API基础

### 标准版
**包含**: Phase 1 + Phase 2 + Phase 4  
**工作量**: 80人日（约2.5个月，2人团队）  
**核心价值**: MVP + 多模型协同 + HMM分析

### 完整版
**包含**: Phase 1-4全部  
**工作量**: 113人日（约3.5个月，2人团队）  
**核心价值**: 标准版 + 策略演进 + 高级模型

---

## 质量目标

- 单元测试覆盖率: >80%
- 集成测试通过率: 100%
- 代码review通过率: 100%
- API响应时间: <200ms
- 系统稳定性: >99%

---

## 项目完成标志

✅ 所有Phase验收标准达成  
✅ 无P0/P1级别bug  
✅ 文档完整且最新  
✅ 代码review全部通过  
✅ 与AIStock对接测试通过  
✅ 性能满足要求  
✅ 可Docker部署
